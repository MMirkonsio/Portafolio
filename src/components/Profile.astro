---
import Copy from "../icons/Copy.astro";
import Email from "../icons/Email.astro";
import Github from "../icons/Github.astro";
import Linkedin from "../icons/Linkedin.astro";
import Location from "../icons/Location.astro";
import PDF from "../icons/PDF.astro";
---

<div
  class="flex flex-col sm:flex-row justify-start items-center gap-4 w-full mb-12"
>
  <span class="inline-flex items-center justify-center">
    <img
      src="./images/me.webp"
      alt="Mirko A. Valencia"
      class="rounded-full object-cover w-24 h-24 sm:w-32 sm:h-32 border-2 border-green-500"
    />
  </span>
  <div class="flex flex-col items-start w-full sm:w-auto">
    <h1 class="text-4xl font-bold mt-4">Mirko A. Valencia</h1>
    <h2 class="text-lg sm:text-xl mt-2 text-green-500">
      Analista Programador <span class="text-gray-100">|</span> Desarrollador Web
      Frontend
    </h2>
    <div
      class="flex flex-col sm:flex-row justify-between sm:items-center gap-6 sm:gap-3 mt-4"
    >
      <span class="flex items-center gap-1">
        <Location class="h-5 w-5 sm:h-6 sm:w-6" /> Chile, Coquimbo
      </span>
      <div class="flex items-center mt-2 sm:mt-0 ml-6">
        <ul>
          <li class="icon-content rounded-full overflow-hidden">
            <button
              class="icon-btn copy-btn"
              data-email="mirkovalencia90@gmail.com"
              aria-label="Copiar Email"
              title="mirkovalencia90@gmail.com"
            >
              <Email class="h-5 w-5 sm:h-6 sm:w-6" />
            </button>
            <div class="tooltip">Email</div>
          </li>
          
          <li class="icon-content rounded-full overflow-hidden">
            <a
              href="https://www.linkedin.com/in/mirko-valencia-92a811205/"
              class="icon-btn"
              aria-label="Linkedin"
              target="_blank"
              rel="noopener noreferrer"
            >
              <Linkedin class="h-5 w-5 sm:h-6 sm:w-6" />
            </a>
            <div class="tooltip">Linkedin</div>
          </li>
          
          <li class="icon-content rounded-full overflow-hidden">
            <a
              href="https://github.com/MMirkonsio"
              class="icon-btn"
              aria-label="Github"
              target="_blank"
              rel="noopener noreferrer"
            >
              <Github class="h-5 w-5 sm:h-6 sm:w-6" />
            </a>
            <div class="tooltip">Github</div>
          </li>
          
          <li class="icon-content rounded-full overflow-hidden">
            <a
              href="https://drive.google.com/file/d/13Jl-IUGsvD10lo1Du1BjEnpSaN3fvAyF/view?usp=sharing"
              class="icon-btn"
              aria-label="PDF"
              target="_blank"
              rel="noopener noreferrer"
            >
              <PDF class="h-5 w-5 sm:h-6 sm:w-6" />
            </a>
            <div class="tooltip">Curriculum</div>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>

<!-- Contenedor de la alerta personalizada -->
<div id="custom-alert" class="custom-alert hidden">
  <span id="alert-message" class="font-bold"></span>
</div>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const alertContainer = document.getElementById("custom-alert");
    const alertMessage = document.getElementById("alert-message");

    document.querySelectorAll(".copy-btn").forEach((button) => {
      button.addEventListener("click", () => {
        const email = button.getAttribute("data-email");
        if (email !== null) {
          navigator.clipboard
            .writeText(email)
            .then(() => {
              if (alertContainer !== null && alertMessage !== null) {
                alertMessage.textContent = "Correo copiado";
                alertContainer.classList.remove("hidden");
                setTimeout(() => {
                  if (alertContainer !== null) {
                    alertContainer.classList.add("hidden");
                  }
                }, 3000); // Ocultar alerta después de 3 segundos
              }
            })
            .catch((error) => {
              console.error("Error al copiar el correo electrónico:", error);
            });
        }
      });
    });
  });
</script>
